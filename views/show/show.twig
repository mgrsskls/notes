{% extends "../html.twig" %}

{% block head %}
  <link rel="stylesheet" href="/assets/layout.css">
{% endblock %}

{% block content %}
  {% include "../common/header/header.twig" with {
    query: query,
    tags: tags,
    topics: topics,
    activeTags: activeTags
  } only %}
  <main class="IndexMain u-flex u-flex-col">
    <div class="Note Note--full u-flex u-flex-col u-flex-grow">
      <div class="Note-content">
        <h2 class="Note-title">{{ note.title }}</h2>
        {% if note.url %}
        <p>
          <a class="Note-link" href="{{ note.url }}" target="_blank" rel="noopener noreferrer">{{ note.url }}</a>
        </p>
        {% endif %}
        {% if note.text %}
        <div class="Note-text">
          {% include "../common/rich-text/rich-text.twig" with {text: note.text} %}
        </div>
        {% endif %}
      </div>
      <div class="Note-footer">
        <div class="Note-tags">
          <div class="Note-topic">
            {{ note.topic }}
          </div>
          {% include "../common/note/tags/tags.twig" with {tags: note.tags} %}
        </div>
        <div class="Note-meta">
          <ul class="Note-actionsList">
            <li>
              <a href="/notes/{{ note.id }}/edit">{{ 'note.update.link'|t }} <span class="u-hiddenVisually">{{ 'note.label'|t }} "{{ title }}"</span></a>
            </li>
            <li>
              <form action="/notes/{{ note.id }}/delete" method="POST" onsubmit="return confirm('{{ 'note.delete.confirm'|t }}');">
                <input type="hidden" name="_csrf" value="{{ csrfToken }}">
                <button class="Note-delete" type="submit" name="delete" aria-label="{{ 'note.delete.submit'|t }}">
                  {{ 'note.delete.submit'|t }}
                </button>
              </form>
            </li>
          </ul>
          <p><small class="Note-createdAt">{{ 'note.createdAt'|t }} <time datetime="{{ note.createdAt }}" id="note-date">{{ note.createdAt }}</time></small></p>
        </div>
        <script>
          document.getElementById("note-date").textContent = new Date("{{ note.createdAt }}").toLocaleString();
        </script>
      </div>
    </div>
  </main>

  <template id="copy">
    <button class="Note-copy js-copy" data-label="{{ 'note.copy.feedback'|t }}">
      <span class="u-hiddenVisually">{{ 'note.copy.label'|t }}</span>
      <svg class="Note-copyIcon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 469.3 469.3"><path d="M330.7 0h-256C51 0 32 19 32 42.7v298.6h42.7V42.7h256V0z"/><path d="M394.7 85.3H160c-23.6 0-42.7 19.1-42.7 42.7v298.7c0 23.5 19.1 42.6 42.7 42.6h234.7c23.5 0 42.6-19 42.6-42.6V128c0-23.6-19-42.7-42.6-42.7zm0 341.4H160V128h234.7v298.7z"/></svg>
    </button>
  </template>
{% endblock %}
